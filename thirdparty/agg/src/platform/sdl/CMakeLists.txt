PROJECT( aggplatformsdl )

CMAKE_MINIMUM_REQUIRED( VERSION 3.13 )

FIND_PACKAGE( SDL REQUIRED )

ADD_LIBRARY( ${PROJECT_NAME} STATIC
    agg_platform_support.cpp
    ${platform_HEADERS}
)
TARGET_INCLUDE_DIRECTORIES( ${PROJECT_NAME} PUBLIC ${SDL_INCLUDE_DIR})
TARGET_LINK_LIBRARIES( ${PROJECT_NAME} PUBLIC ${SDL_LIBRARY})
TARGET_LINK_LIBRARIES( ${PROJECT_NAME} PUBLIC agg)

ADD_LIBRARY(agg::sdlplatform ALIAS ${PROJECT_NAME})
TARGET_LINK_LIBRARIES( agg_internal INTERFACE agg::sdlplatform )

SET_TARGET_PROPERTIES(
    ${PROJECT_NAME}
    PROPERTIES
    VERSION ${agg_VERSION}
    SOVERSION 0.${agg_VERSION}
)

INSTALL(TARGETS ${PROJECT_NAME}
    EXPORT aggTargets DESTINATION ${CMAKE_INSTALL_LIBDIR}
    RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT runtime
    ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR} COMPONENT devel
)
