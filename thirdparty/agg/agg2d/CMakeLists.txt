PROJECT( agg2d )

CMAKE_MINIMUM_REQUIRED( VERSION 3.13 )

SET( agg2d_HEADERS
    agg2d.h
)


ADD_LIBRARY( ${PROJECT_NAME} STATIC
    agg2d.cpp
    ${agg2d_HEADERS}
)

TARGET_INCLUDE_DIRECTORIES( ${PROJECT_NAME} PUBLIC
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
    $<INSTALL_INTERFACE:include/agg/agg2d>
)



TARGET_COMPILE_DEFINITIONS( ${PROJECT_NAME} PUBLIC AGG_USE_AGG2D )
TARGET_LINK_LIBRARIES( ${PROJECT_NAME} PUBLIC agg aggfontfreetype )

ADD_LIBRARY( agg::2d ALIAS ${PROJECT_NAME} )
TARGET_LINK_LIBRARIES( agg_internal INTERFACE agg::2d )

IF ( agg_USE_AGG2D_FREETYPE )
    TARGET_COMPILE_DEFINITIONS( ${PROJECT_NAME} PUBLIC AGG2D_USE_FREETYPE )
ENDIF ( agg_USE_AGG2D_FREETYPE )

SET_TARGET_PROPERTIES(${PROJECT_NAME} PROPERTIES
    PUBLIC_HEADER "${agg2d_HEADERS}"
    VERSION ${agg_VERSION}
    SOVERSION 0.${agg_VERSION}
)

INSTALL(TARGETS ${PROJECT_NAME}
    EXPORT aggTargets DESTINATION ${CMAKE_INSTALL_LIBDIR}
    RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT runtime
    ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR} COMPONENT devel
    PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/agg/2d COMPONENT devel
)
